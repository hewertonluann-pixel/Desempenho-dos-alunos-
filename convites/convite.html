<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Convite ‚Äì Recital de Saxofone</title>

  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">

  <style>
    body {
      margin: 0;
      font-family: 'Inter', sans-serif;
      background: radial-gradient(circle at top, #1a1a2e, #050508);
      color: #f1f5f9;
      overflow: hidden;
    }

    .holofote { position: fixed; inset: 0; background: radial-gradient(circle at center, rgba(255,215,120,0.15), rgba(0,0,0,0.85) 70%); pointer-events:none; z-index:0; }
    .particulas { position: fixed; inset: 0; pointer-events:none; z-index:1; background: repeating-radial-gradient(circle at 30% 30%, rgba(255,215,120,0.05), transparent 80px); animation: brilhar 8s linear infinite; }
    @keyframes brilhar {0%{opacity:.3}50%{opacity:.6}100%{opacity:.3}}
    body::after {content:"";position:fixed;inset:0;background:radial-gradient(circle at center,transparent 40%,rgba(0,0,0,0.7));pointer-events:none;z-index:2;}

    .notas-container{position:fixed;inset:0;pointer-events:none;overflow:hidden;z-index:1}
    .nota{position:absolute;bottom:-40px;color:rgba(248,250,252,.6);font-size:24px;animation:subirNota linear forwards;filter:drop-shadow(0 0 6px rgba(199,169,60,.4))}
    @keyframes subirNota{from{transform:translateY(0) scale(.8);opacity:0}20%{opacity:.8}to{transform:translateY(-110vh) scale(1.3);opacity:0}}

    .center-screen{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;text-align:center;position:relative;z-index:5}
    .sax{font-size:120px;animation:float 4s ease-in-out infinite;text-shadow:0 0 15px rgba(255,215,120,.8),0 0 35px rgba(255,215,120,.4)}
    @keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-15px)}}

    .play-btn{margin-top:30px;padding:14px 28px;background:transparent;border:1px solid #c7a93c;color:#f8fafc;border-radius:40px;font-size:18px;cursor:pointer}

    .painel{position:fixed;inset:0;background:linear-gradient(to bottom,rgba(5,5,8,.95),rgba(15,15,30,.98));display:flex;align-items:center;justify-content:center;padding:20px;opacity:0;pointer-events:none;transition:opacity 1s ease;z-index:5}
    .painel.ativo{opacity:1;pointer-events:all}

    .convite-card{max-width:700px;background:rgba(20,20,35,.85);border:1px solid rgba(199,169,60,.3);border-radius:20px;padding:60px 30px 40px;text-align:center;position:relative;box-shadow:0 0 40px rgba(255,215,120,.15);overflow:hidden}

    .foto-fundo{position:absolute;left:50%;top:55%;transform:translate(-50%,-50%);max-height:400px;opacity:1;z-index:0}
    .convite-card>*{position:relative;z-index:1}

    #btnFechar{position:absolute;top:12px;right:12px;width:34px;height:34px;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.6);border-radius:50%;border:1px solid rgba(199,169,60,.4);color:#e2e8f0;font-size:18px;cursor:pointer}

    .confirmacao button{padding:12px 22px;border-radius:25px;border:none;font-weight:600;cursor:pointer;color:white}
    #btnSim{background:linear-gradient(135deg,#22c55e,#15803d)}
    #btnNao{background:linear-gradient(135deg,#ef4444,#991b1b)}

    @media(max-width:600px){.foto-fundo{max-height:240px}.confirmacao{margin-top:160px}}
  </style>
</head>
<body>

<div class="holofote"></div>
<div class="particulas"></div>
<div class="notas-container" id="notasContainer"></div>

<div class="center-screen" id="telaInicial">
  <div class="sax">üé∑</div>
  <button class="play-btn" id="btnPlay">‚ñ∂ Abrir convite</button>
</div>

<div class="painel" id="painelConvite">
  <div class="convite-card">
    <img src="./eu.png" onerror="this.style.display='none'" alt="Hewerton com sax" class="foto-fundo">
    <button id="btnFechar">√ó</button>
    <h1>Convite Especial</h1>
    <h2>Recital de Saxofone ‚Äì Formatura</h2>
    <p style="margin-top:8px;font-style:italic;color:#facc15;">
      Convidado por <strong>Hewerton Assun√ß√£o</strong>
    </p>

    <p id="textoConvite"></p>

    <div style="margin-top:20px;font-size:20px;font-weight:600;color:#facc15;">
      üìÖ 08 de dezembro de 2025<br>‚è∞ 20h00
    </div>

    <div class="confirmacao">
      <p><strong>Voc√™ ir√° comparecer?</strong></p>
      <button id="btnSim">‚úÖ Sim</button>
      <button id="btnNao">‚ùå N√£o</button>
    </div>
  </div>
</div>

<div id="popupConfirmacao" class="popup-confirmacao"></div>

<div id="ytPlayer" style="display:none"></div>
<script src="https://www.youtube.com/iframe_api"></script> class="popup-confirmacao"></div>

<script type="module">
import { db } from "../firebase-config.js";
import { doc, updateDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-firestore.js";

const popup = document.getElementById('popupConfirmacao');
const params = new URLSearchParams(window.location.search);
const nome = params.get('nome');
const idConvite = params.get('id');
const textoConvite = document.getElementById('textoConvite');

textoConvite.innerHTML = nome
  ? `√â com grande alegria que <strong>eu, Hewerton Assun√ß√£o</strong>, convido <strong>${nome}</strong> para prestigiar minha <strong>formatura em Saxofone</strong> pelo <strong>Conservat√≥rio Estadual de M√∫sica Lobo de Mesquita</strong>.`
  : `√â com grande alegria que <strong>eu, Hewerton Assun√ß√£o</strong>, convido voc√™ para prestigiar minha <strong>formatura em Saxofone</strong> pelo <strong>Conservat√≥rio Estadual de M√∫sica Lobo de Mesquita</strong>.`;

// assinatura visual do convidante
const assinatura = document.createElement('p');
assinatura.style.marginTop = '25px';
assinatura.style.fontSize = '15px';
assinatura.style.color = '#eab308';
assinatura.style.fontStyle = 'italic';
assinatura.innerHTML = '‚Äî Hewerton Assun√ß√£o';
textoConvite.parentElement.appendChild(assinatura);

function showPopup(msg) {
  popup.textContent = msg;
  popup.classList.add('ativo');
  setTimeout(() => popup.classList.remove('ativo'), 3000);
}

const telaInicial = document.getElementById('telaInicial');
const painelConvite = document.getElementById('painelConvite');

// Bot√£o PLAY - abre convite
document.getElementById('btnPlay').onclick = () => {
  telaInicial.style.display = 'none';
  painelConvite.classList.add('ativo');
  iniciarNotas();
  if (player) {
    player.setVolume(15);
    player.playVideo();
  }
};

// Bot√£o X - fecha convite
document.getElementById('btnFechar').onclick = () => {=()=>{
  painelConvite.classList.remove('ativo');
  telaInicial.style.display='flex';
  if(player){player.pauseVideo();}
};
