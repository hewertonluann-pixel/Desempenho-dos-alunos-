<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Painel do Aluno</title>
  <link rel="icon" href="favicon.svg" type="image/svg+xml">
  <link rel="stylesheet" href="loader.css">
  <link rel="stylesheet" href="aluno.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap">
</head>

<body>
  <!-- Global Loader -->
  <div id="global-loader">
    <div class="spinner-container">
      <div class="spinner"></div>
      <div id="emoji-container">üé∑</div>
      <div id="verse-container">
        <div id="verse-text"></div>
        <div id="verse-reference"></div>
      </div>
    </div>
  </div>

  <div class="main-container">
    <aside class="sidebar">
      <div class="profile-card">
        <div class="photo-upload">
          <img id="fotoAluno" src="https://via.placeholder.com/150" alt="Foto do aluno" class="profile-photo">
          <label for="novaFoto" class="upload-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26"
                 viewBox="0 0 24 24" fill="none" stroke="currentColor"
                 stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 20h9" />
                <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z" />
            </svg>
          </label>
          <input type="file" id="novaFoto" accept="image/*" onchange="enviarNovaFoto()" style="display: none;" />
        </div>
        <h1 class="aluno-name" id="nomeAluno">Nome do Aluno</h1>
        <p class="instrument" id="instrumentoAluno">Instrumento</p>
        <div class="level-info">
          <span class="level-label">N√≠vel Geral</span>
          <span class="level-value" id="nivelGeral">0</span>
        </div>
        <div class="level-details">
          <div class="detail-item">
            <span class="detail-label">Leitura</span>
            <span class="detail-value" id="nivelLeitura">0</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">M√©todo</span>
            <span class="detail-value" id="nivelMetodo">0</span>
          </div>
        </div>
        <button class="btn-change-password" onclick="abrirConfiguracoes()">‚öôÔ∏è Configura√ß√µes</button>
        <button class="btn-professor-mode" id="modoProfessorBtn" style="display:none;" onclick="acessarModoProfessor()">üë®‚Äçüè´ Modo Professor</button>
      </div>
      
      <div class="sidebar-buttons-row">
        <div class="social-link-card">
          <a href="painel-social.html" class="social-link">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-users"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
            Comunidade
          </a>
        </div>
        
        <div class="social-link-card">
          <a href="biblioteca.html" class="social-link">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-book"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg>
            Biblioteca
          </a>
        </div>
      </div>
    </aside>

    <main class="content-area">
      
      <!-- COMPROMETIMENTO (NOVO DESIGN C√ÅPSULA) -->
      <section class="energy-section card">
        <h2>Comprometimento</h2>
        <div class="capsule-grid">
          <!-- GERAL -->
          <div class="capsule-wrapper">
            <div class="capsule-title"><span class="legend-circle blue"></span> Geral [2026]</div>
            <div class="capsule blue">
              <div class="capsule-circle blue-circle" id="valorEnergiaGeral">0%</div>
              <div class="capsule-bar">
                <div class="capsule-fill blue-fill" id="barraEnergiaGeral"></div>
              </div>
            </div>
          </div>
          <!-- MENSAL -->
          <div class="capsule-wrapper">
            <div class="capsule-title"><span class="legend-circle green"></span> Mensal [Fevereiro]</div>
            <div class="capsule green">
              <div class="capsule-circle green-circle" id="valorEnergiaMensal">0%</div>
              <div class="capsule-bar">
                <div class="capsule-fill green-fill" id="barraEnergiaMensal"></div>
              </div>
            </div>
          </div>
        </div>
        <div class="quote-container">
          <p class="quote">"Tudo que tem f√¥lego louve ao Senhor. Aleluia!"</p>
          <span class="reference">Salmo 150:6</span>
        </div>
      </section>

      <!-- NOTIFICA√á√ïES -->
      <section class="notifications-section card">
        <h2>üîî Atividades Recentes</h2>
        <ul class="lista-notificacoes" id="listaNotificacoes">
          <!-- Notifica√ß√µes ser√£o injetadas aqui -->
        </ul>
      </section>

      <!-- FREQU√äNCIA ANUAL -->
      <section class="frequency-section card">
        <h2>üìÖ Frequ√™ncia Anual</h2>
        <div class="year-control">
          <button id="anoAnterior" class="arrow-btn" onclick="mudarAno(-1)">&lt;</button>
          <span id="anoAtualTexto" class="current-year"></span>
          <button id="anoProximo" class="arrow-btn" onclick="mudarAno(1)">&gt;</button>
        </div>
        <div class="frequency-grid" id="gradeFrequencia">
          <!-- Gr√°ficos de frequ√™ncia ser√£o injetados aqui -->
        </div>
      </section>

      <!-- CONQUISTAS -->
      <section class="achievements-section card">
        <h2>üèÜ <a href="manual.html" target="_blank" style="color: inherit; text-decoration: none;">Conquistas</a></h2>
        <div class="achievements-grid" id="grade-conquistas">
          <!-- Conquistas ser√£o injetadas aqui -->
        </div>
      </section>

      <!-- LI√á√ïES ENVIADAS -->
      <section class="lessons-section card">
        <h2>üé§ Li√ß√µes Enviadas</h2>
        <button class="btn-send-lesson" onclick="abrirModalEnviarLicao()">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-plus"><path d="M5 12h14"></path><path d="M12 5v14"></path></svg>
          Enviar nova li√ß√£o
        </button>
        <div id="listaLicoes" class="lessons-list">
          <!-- Li√ß√µes ser√£o injetadas aqui -->
        </div>
      </section>

      <!-- EVOLU√á√ÉO T√âCNICA -->
      <section class="evolucao-section card">
        <h2>üìà Evolu√ß√£o T√©cnica</h2>
        <div id="painelEvolucao"></div>
      </section>

    </main>
  </div> <!-- main-container -->


  <!-- ============================================================
       MODAIS E POPUPS PADRONIZADOS
       ============================================================ -->
  
  <!-- POPUP FREQU√äNCIA -->
  <div id="popupFrequencia" class="modal" style="display:none;">
    <div class="modal-content">
      <span class="close-button" onclick="fecharPopupFrequencia()">&times;</span>
      <div class="modal-body"></div>
    </div>
  </div>

  <!-- Popup de Detalhes da Conquista -->
  <div id="popupConquista" class="modal">
    <div class="modal-content">
      <span class="close-button" onclick="fecharPopupConquista()">&times;</span>
      <div class="conquista-header">
        <span id="conquistaIcone" class="achievement-icon"></span>
        <h2 id="conquistaTitulo"></h2>
      </div>
      <p id="conquistaDescricao"></p>
      <h3>Detalhes da Conquista:</h3>
      <ul id="conquistaDetalhes">
        <!-- Detalhes preenchidos pelo JS -->
      </ul>
    </div>
  </div>

  <!-- POPUP SENHA / CONFIGURA√á√ïES -->
  <div id="popupSenha" class="modal" style="display:none;">
    <div class="modal-content">
      <span class="close-button" onclick="fecharPopup()">&times;</span>
      <h2>‚öôÔ∏è Configura√ß√µes</h2>
      <div class="modal-body">
        <label for="novaSenha">Alterar Senha</label>
        <input type="password" id="novaSenha" placeholder="Nova senha" />
        <div class="modal-buttons">
          <button onclick="fecharPopup()" class="btn-cancelar">Cancelar</button>
          <button onclick="salvarSenha()" class="btn-salvar">Salvar Altera√ß√µes</button>
        </div>
        <p id="mensagemSenha"></p>
      </div>
    </div>
  </div>

  <!-- LOADER -->
  <script src="loader.js"></script>

  <!-- GRAFICO -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="grafico-evolucao.js"></script>

  <!-- SCRIPTS DO PAINEL -->
  <script type="module" src="notificacoes.js"></script>
  <script type="module" src="aluno3.js?v=3"></script>
  <script type="module" src="navegacao.js"></script>
  <script src="js/recorder.js"></script>
  <script type="module" src="licoes.js?v=1"></script>

</body>
</html>
